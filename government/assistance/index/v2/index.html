<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Mycelial Portals · Constellation TOC</title>
  <style>
    :root{
      --bg:#06070d;
      --fg:#e6f0ff;
      --muted:#a1b3d6;
      --card:#0b0f1a99; /* glass */
      --accent:#9fd2ff;
      --glow:#4da3ff44;
      --ring:#7cc0ff;
      --focus:#b7e1ff;
      --shadow: 0 10px 30px rgba(0,0,0,.5), 0 0 60px var(--glow);
      --radius: 20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background: radial-gradient(1200px 800px at 70% -10%, #0b1221 0%, #070a14 40%, var(--bg) 85%);
      color:var(--fg); font: 500 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow-x: hidden;
    }

    /* ===== Starfield Canvas ===== */
    .sky{
      position:fixed; inset:0; z-index:-2; pointer-events:none;
      filter: drop-shadow(0 0 6px #8ecbff44);
    }

    /* ===== Constellation layer (parallax SVG) ===== */
    .constellations{
      position:fixed; inset:0; z-index:-1; pointer-events:none;
      opacity:.6;
    }
    .constellations line{ stroke:#9bd0ff; stroke-width:1.2; stroke-linecap:round; filter: drop-shadow(0 0 4px #9bd0ff);
      stroke-dasharray: 4 6; animation: twinkle 6s ease-in-out infinite;
    }
    .constellations circle{ fill:#cfe7ff; filter: drop-shadow(0 0 8px #d8eeff);
      animation: twinkle 5s ease-in-out infinite;
    }
    @keyframes twinkle{ 0%,100%{opacity:.9} 50%{opacity:.35} }

    /* ===== Header ===== */
    header{
      width:min(1100px, 92vw); margin: clamp(18px, 2.8vh, 40px) auto 0 auto; padding: 18px 20px; border-radius: var(--radius);
      backdrop-filter: blur(8px) saturate(120%); background: linear-gradient(180deg, #0a0f1b99, #080b1499);
      border: 1px solid #1a2340;
      box-shadow: var(--shadow);
    }
    h1{
      margin: 0 0 6px 0; font-weight: 800; letter-spacing:.4px; line-height:1.15;
      font-size: clamp(22px, 3.3vw, 44px);
      background: linear-gradient(90deg, #ffffff, #bfe2ff 60%, #9fd2ff);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .sub{color:var(--muted); font-size: clamp(13px, 1.8vw, 16px)}

    /* ===== Grid of portal cards ===== */
    .grid{
      width:min(1200px, 94vw); margin: 24px auto 120px; display:grid; gap:22px;
      grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
    }

    .card{
      position:relative; isolation:isolate; border-radius: var(--radius); padding:22px 20px 18px;
      background: radial-gradient(140% 140% at 120% -20%, #0b152caa, #0a0f1a99 45%, #090d1799), linear-gradient(180deg, #0a0f1a88, #0a0f1a44);
      border:1px solid #152442;
      box-shadow: var(--shadow);
      transform-style: preserve-3d; transition: transform .6s ease, border-color .3s ease, box-shadow .3s ease, background .4s ease;
      overflow: hidden;
    }
    .card:focus-within, .card:focus, .card:hover{ border-color:#25467a; box-shadow: 0 12px 40px rgba(0,0,0,.6), 0 0 100px #83c7ff26; }
    .card:hover{ transform: translateY(-4px) rotateX(2deg) rotateY(-2deg); }

    .card::before{
      content:""; position:absolute; inset:-2px; z-index:-1; border-radius: inherit; background:
        radial-gradient(500px 220px at var(--mx,50%) -20%, #2a7fff22, transparent 60%),
        radial-gradient(800px 300px at -10% var(--my,50%), #45ffe822, transparent 60%);
      transition: .25s ease; filter: blur(10px);
    }

    .badge{ display:inline-flex; align-items:center; gap:8px; font-size:.78rem; letter-spacing:.3px; color:#d8eaff; opacity:.9; }
    .badge svg{ width:18px; height:18px; opacity:.85 }

    .title{ margin:12px 0 6px; font-weight:800; font-size:1.25rem; letter-spacing:.3px }
    .desc{ margin:0 0 14px; color:var(--muted); font-size:.95rem }

    .card a{
      position:relative; display:inline-flex; gap:10px; align-items:center; justify-content:center;
      padding:10px 14px; border-radius: 12px; border:1px solid #1e3b6a; color:#e7f4ff; text-decoration:none; font-weight:700; letter-spacing:.2px;
      background: linear-gradient(180deg, #0c1830, #0a1224); box-shadow: inset 0 0 0 1px #203b66, 0 6px 20px #0008;
      transform: translateZ(30px); transition: background .35s ease, transform .35s ease, border-color .35s ease;
    }
    .card a:hover{ background: linear-gradient(180deg, #0f2344, #0b1830); border-color:#2c5699; transform: translateZ(42px) translateY(-1px); }

    .halo{
      position:absolute; inset:-1px; border-radius:inherit; z-index:-2; opacity:.6;
      background: conic-gradient(from 180deg, #2d78ff22, #00ffe822, #00ffd922, #2d78ff22);
      filter: blur(18px); transform: translateZ(1px);
    }

    /* Footer */
    footer{ width:min(1100px,92vw); margin: 18px auto 60px; color: var(--muted); opacity:.85; text-align:center; font-size:.9rem }

    /* Accessibility: reduced motion */
    @media (prefers-reduced-motion: reduce){
      .card, .card a{ transition:none }
      .card:hover{ transform:none }
      .constellations, .sky{ animation: none }
    }
  </style>
</head>
<body>
  <!-- Parallax starfield and constellations -->
  <canvas id="sky" class="sky" aria-hidden="true"></canvas>
  <svg class="constellations" viewBox="0 0 100 100" preserveAspectRatio="none" aria-hidden="true">
    <!-- Simple abstract constellations; positions in % of viewport via viewBox units -->
    <g id="c1" opacity=".75">
      <circle cx="12" cy="18" r=".6"/>
      <circle cx="24" cy="30" r=".7"/>
      <circle cx="38" cy="22" r=".6"/>
      <circle cx="52" cy="34" r=".7"/>
      <line x1="12" y1="18" x2="24" y2="30"/>
      <line x1="24" y1="30" x2="38" y2="22"/>
      <line x1="38" y1="22" x2="52" y2="34"/>
    </g>
    <g id="c2" opacity=".7">
      <circle cx="72" cy="14" r=".6"/>
      <circle cx="84" cy="26" r=".7"/>
      <circle cx="90" cy="12" r=".55"/>
      <line x1="72" y1="14" x2="84" y2="26"/>
      <line x1="84" y1="26" x2="90" y2="12"/>
    </g>
    <g id="c3" opacity=".75">
      <circle cx="18" cy="70" r=".6"/>
      <circle cx="30" cy="62" r=".6"/>
      <circle cx="46" cy="72" r=".7"/>
      <circle cx="58" cy="62" r=".6"/>
      <line x1="18" y1="70" x2="30" y2="62"/>
      <line x1="30" y1="62" x2="46" y2="72"/>
      <line x1="46" y1="72" x2="58" y2="62"/>
    </g>
    <g id="c4" opacity=".65">
      <circle cx="72" cy="78" r=".6"/>
      <circle cx="86" cy="68" r=".7"/>
      <circle cx="92" cy="84" r=".6"/>
      <line x1="72" y1="78" x2="86" y2="68"/>
      <line x1="86" y1="68" x2="92" y2="84"/>
    </g>
  </svg>

  <header>
    <h1>Constellation TOC</h1>
    <p class="sub">A sleek, parallax starfield with portal cards. Pick a node to open its universe.
    </p>
  </header>

  <main class="grid" id="cards">
    <!-- Card 1 -->
    <section class="card" tabindex="0" data-url="https://planetaryrestorationarchive.com/overnight/government/assistance/ga/debates" aria-label="GA Debates & Flash Appeals">
      <div class="halo" aria-hidden="true"></div>
      <div class="badge" aria-hidden="true"> 
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M4 4h16v12H5.17L4 17.17V4z"/>
          <path d="M8 8h8M8 12h5"/>
        </svg>
        Agenda Signal
      </div>
      <h2 class="title">GA Debates & Flash Appeals</h2>
      <p class="desc">Formal “we need help now” indicators—funding & access bottlenecks at a glance.</p>
      <a href="https://planetaryrestorationarchive.com/overnight/government/assistance/ga/debates" target="_blank" rel="noopener">Open Portal →</a>
    </section>

    <!-- Card 2 -->
    <section class="card" tabindex="0" data-url="https://planetaryrestorationarchive.com/overnight/government/assistance/drc/outbreak" aria-label="DRC Outbreak Ops">
      <div class="halo" aria-hidden="true"></div>
      <div class="badge" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="9"/>
          <path d="M12 7v10M7 12h10"/>
        </svg>
        Health Ops
      </div>
      <h2 class="title">DRC Outbreak Ops</h2>
      <p class="desc">Surge capacity signals (epi, labs, case management) with continuity cues.</p>
      <a href="https://planetaryrestorationarchive.com/overnight/government/assistance/drc/outbreak" target="_blank" rel="noopener">Open Portal →</a>
    </section>

    <!-- Card 3 -->
    <section class="card" tabindex="0" data-url="https://planetaryrestorationarchive.com/overnight/government/assistance/aid/worker/safety" aria-label="Aid‑Worker Safety">
      <div class="halo" aria-hidden="true"></div>
      <div class="badge" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z"/>
          <path d="M9.5 12l2 2 3.5-3.5"/>
        </svg>
        Protection
      </div>
      <h2 class="title">Aid‑Worker Safety</h2>
      <p class="desc">Public figures and field signals converging on protective access.</p>
      <a href="https://planetaryrestorationarchive.com/overnight/government/assistance/aid/worker/safety" target="_blank" rel="noopener">Open Portal →</a>
    </section>

    <!-- Card 4 -->
    <section class="card" tabindex="0" data-url="https://planetaryrestorationarchive.com/overnight/government/assistance/climate/finance/alignment" aria-label="Climate‑Finance Alignment">
      <div class="halo" aria-hidden="true"></div>
      <div class="badge" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M3 12a9 9 0 1 0 18 0 9 9 0 1 0-18 0"/>
          <path d="M8 12h8M12 8v8"/>
        </svg>
        Alignment
      </div>
      <h2 class="title">Climate‑Finance Alignment</h2>
      <p class="desc">Mandatory transition planning & fossil‑risk exposure—clarity by design.</p>
      <a href="https://planetaryrestorationarchive.com/overnight/government/assistance/climate/finance/alignment" target="_blank" rel="noopener">Open Portal →</a>
    </section>
  </main>

  <footer>
    Built as a single, offline‑friendly HTML portal. Keyboard: Tab to focus, Enter to open. Motion is gentle and respects <code>prefers-reduced-motion</code>.
  </footer>

  <script>
    // ===== Starfield (animated) =====
    const canvas = document.getElementById('sky');
    const ctx = canvas.getContext('2d');
    let stars = [], w, h, dpr = Math.min(window.devicePixelRatio || 1, 2);
    const STAR_COUNT = 260; // tuned for perf

    function rand(min, max){ return Math.random() * (max - min) + min; }
    function resize(){ w = canvas.width = Math.floor(innerWidth * dpr); h = canvas.height = Math.floor(innerHeight * dpr); canvas.style.width = innerWidth + 'px'; canvas.style.height = innerHeight + 'px'; }
    function makeStars(){
      stars = new Array(STAR_COUNT).fill(0).map(()=>({
        x: rand(0, w), y: rand(0, h), z: rand(.2, 1.4), r: rand(.4, 1.8) * dpr,
        vx: rand(-.02, .02), vy: rand(.02, .12)
      }));
    }
    function step(){
      ctx.clearRect(0,0,w,h);
      for(const s of stars){
        s.x += s.vx * s.z; s.y += s.vy * s.z;
        if(s.y > h || s.x < -20 || s.x > w+20){ s.x = rand(0,w); s.y = -10; s.z = rand(.2, 1.4); }
        const alpha = .65 + .35 * Math.sin((s.x + s.y) * .002);
        ctx.beginPath(); ctx.arc(s.x, s.y, s.r * s.z, 0, Math.PI*2);
        ctx.fillStyle = `rgba(200, 230, 255, ${alpha})`; ctx.fill();
      }
      requestAnimationFrame(step);
    }
    resize(); makeStars(); step();
    addEventListener('resize', ()=>{ resize(); makeStars(); });

    // ===== Parallax for SVG constellations =====
    const svg = document.querySelector('.constellations');
    document.addEventListener('scroll', ()=>{
      const y = window.scrollY || 0;
      // translate constellations slower than scroll for depth
      svg.style.transform = `translateY(${y * -0.1}px)`;
      svg.style.opacity = String(0.55 + Math.max(0, 0.25 - y/1400));
    }, {passive:true});

    // ===== Card interactivity: mouse glow + keyboard open =====
    const cards = document.querySelectorAll('.card');
    cards.forEach(card=>{
      card.addEventListener('mousemove', (e)=>{
        const r = card.getBoundingClientRect();
        const mx = (e.clientX - r.left) / r.width * 100; // percent
        const my = (e.clientY - r.top) / r.height * 100;
        card.style.setProperty('--mx', mx+'%');
        card.style.setProperty('--my', my+'%');
      });
      card.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          const url = card.getAttribute('data-url');
          window.open(url, '_blank', 'noopener');
          e.preventDefault();
        }
      });
      card.addEventListener('click', (e)=>{
        // clicking empty card area opens link too
        const a = card.querySelector('a');
        if(e.target !== a){ a.click(); }
      });
    });

    // ===== Respect reduced motion for starfield too =====
    const mq = matchMedia('(prefers-reduced-motion: reduce)');
    if(mq.matches){ cancelAnimationFrame(step); ctx.clearRect(0,0,w,h); }
    mq.addEventListener?.('change', (e)=>{ if(e.matches){ ctx.clearRect(0,0,w,h); } else { makeStars(); step(); } });
  </script>
</body>
</html>
